<%- include("partials/header") %>

<div class="chat-layout">
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <h5>Rooms</h5>
      <% if (user.role === 'admin') { %>
        <a href="/rooms/create" class="btn btn-primary btn-sm mt-2 w-100">
          <i class="fa fa-plus"></i> Create Room
        </a>
      <% } %>
    </div>
    <ul id="roomList" class="list-unstyled">
      <% rooms.forEach(room => { %>
        <li onclick="joinRoom('<%= room._id %>')" class="room-item">
          <i class="fa-solid fa-door-open"></i> <%= room.name %>
        </li>
      <% }) %>
    </ul>
  </aside>

  <!-- Chat Window -->
  <section class="chat-window">
    <header class="chat-header">
      <h5 id="roomName">Select a room</h5>
    </header>
    <div id="messages" class="messages"></div>
    <form id="messageForm" class="message-form">
      <input id="messageInput" class="form-control" placeholder="Type a message..." autocomplete="off">
      <button class="btn btn-primary"><i class="fa fa-paper-plane"></i></button>
    </form>
  </section>
</div>

<%- include("partials/footer") %>

<script>
  const TOKEN = "<%= token %>";
  const USER = "<%= user.nickname %>";
</script>